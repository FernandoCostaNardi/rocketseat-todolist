<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/LayoutPadrao}"
    xmlns:brewer="http://brewer.algaworks.com">
        
<head>
    <title>Total de Vendas no Mês </title>
     <script th:src="@{/javascripts/vendors/pace.min.js}"></script> 
    <link rel="stylesheet" type="text/css" th:href="@{/layout/stylesheets/pace-theme-barber-shop.css}"/>
</head>


<body>

<section layout:fragment="conteudo">
    <div class="page-header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-10">
                    <h1>Total de Vendas no Mês - JAB </h1>
                </div>
                 <div class="col-sm-2">
                    <h2 >Mês de referência: _ <a id="mes" style=" font-size: 24px; text-align: right;"></a></h2>
                 </div>
            </div>
        </div>
    </div>
  
    <div class="container-fluid">
            
                <div class="table-responsive  bw-tabela-simples" >
                    <table class="table  table-hover table-striped" th:object="${vendasDoMesPorLoja}" id="tableValorTotalDoMesPorLoja">
                        <thead>
                             <tr class="gl-tabela-Padrao-Titulos">
                                <th class="gl-tabela-vendas-lojaTitulo">Lojas</th>
                                <th class="gl-tabela-vendas-vendaTotalTitulo">Vendas PDV</th>
                                <th class="gl-tabela-vendas-vendaTotalTitulo">Vendas Danfe</th>
                                <th class="gl-tabela-vendas-vendaTotalTitulo">Trocas</th>
                                 <th class="gl-tabela-vendas-vendaTotalTitulo">Total</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr class="gl-tabela-Padrao-dados" th:each="venda : ${vendasDoMesPorLoja}">

                                <td class="gl-tabela-vendas-lojaDados" th:text="${venda.loja}">1</td>
                                <td class="gl-tabela-vendas-vendaTotalDados" th:text="'R$ ' + ${{venda.valorVenda != null ? venda.valorVenda : '0,00'}}">Visa</td>
                                 <td class="gl-tabela-vendas-vendaTotalDados" th:text="'R$ ' + ${{venda.valorVendaDanfe != null ? venda.valorVendaDanfe : '0,00'}}">Visa</td>
                                <td class="gl-tabela-vendas-vendaTotalDados">
                                 <th:block th:if="${(venda.valorTroca != null ? venda.valorTroca : 0) > 0 }">
                                                   <label style="color: red" th:text="'R$ ' + ${{venda.valorTroca != null ? venda.valorTroca : '0,00'}}"></label>
                                    </th:block> 
                                    <th:block th:if="${(venda.valorTroca != null ? venda.valorTroca : 0) <= 0 }">
                                                   <label style="color: #333; font-weight: 300;" th:text="'R$ ' + ${{venda.valorTroca != null ? venda.valorTroca : '0,00'}}"></label>
                                    </th:block>       
                                 </td>
                                 <td class="gl-tabela-vendas-vendaTotalDados" th:text="'R$ ' + ${{(((venda.valorVenda != null ? venda.valorVenda : 0) + (venda.valorVendaDanfe != null ? venda.valorVendaDanfe : 0)) - (venda.valorTroca != null ? venda.valorTroca: 0)) 
                                                                                                                    != 0 ? (((venda.valorVenda != null ? venda.valorVenda : 0) + (venda.valorVendaDanfe != null ? venda.valorVendaDanfe : 0)) - (venda.valorTroca != null ? venda.valorTroca: 0)) : '0,00'}}">Visa</td>
                            </tr>
                            <tr th:if="${#lists.isEmpty(vendasDoMesPorLoja)}">
                                <td colspan="2" class="gl-nadaEncontrado">Nenhuma venda foi efetuada hoje</td>
                            </tr>
                        </tbody>
                        <tfoot>
                        <tr th:each="somaVenda : ${somaVendasDoMesPorLoja}">
                             <td class="gl-tabela-rodape-totalizador-Titulo">TOTAL DE VENDAS HOJE</td>
                            <td class="gl-tabela-rodape-totalizador-Dados" th:text="'R$ ' + ${{somaVenda.valorVenda}}"></td>
                            <td class="gl-tabela-rodape-totalizador-Dados" th:text="'R$ ' + ${{somaVenda.valorVendaDanfe}}"></td>
                            <td class="gl-tabela-rodape-totalizador-Dados">
                                    <th:block th:if="${somaVenda.valorTroca > 0 }">
                                                  <label style="color: red" th:text="'R$ ' + ${{somaVenda.valorTroca}}"></label>
                                    </th:block> 
                                      <th:block th:if="${somaVenda.valorTroca <= 0 }">
                                                   <label style="color: #333; font-weight: 300;" th:text="'R$ ' + ${{somaVenda.valorTroca}}"></label>
                                    </th:block>    
                            </td>
                            <td class="gl-tabela-rodape-totalizador-Dados" th:text="'R$ ' + ${{((somaVenda.valorVenda  != null ? somaVenda.valorVenda : 0) + (somaVenda.valorVendaDanfe  != null ? somaVenda.valorVendaDanfe : 0)) - (somaVenda.valorTroca  != null ? somaVenda.valorTroca : 0)}}"></td>
                            <td></td>
                        </tr>
                        </tfoot>
                    </table>
                     <hr />
                	<div class="gl-dates">
<!--                 		<label >EXPORTAR PARA:</label> -->
                		<button id="btnExportExcel" class="btn btn-sm btn-success clearfix">
                			<span class="fa fa-file-excel-o"></span>  EXPORT TO EXCEL
                		</button>
                	</div>
                	<hr />
                </div>
                
<!--                 <div class="table-responsive  bw-tabela-simples" > -->
<!--                       <div class="row"> -->
<!--                       <h4 class="col-sm-3  text-center">Vendas PDV do Mês</h4> -->
<!--                       </div>  -->
<!--                     <table class="table  table-hover" th:object="${vendasDoMesPorLojaPDV}" id="tableValorTotalDoMesPorLojaPDV"> -->
<!--                         <thead> -->
<!--                             <tr class="gl-tabela-Padrao-Titulos"> -->
<!--                                 <th class="gl-tabela-vendas-lojaTitulo">Lojas</th> -->
<!--                                 <th class="gl-tabela-vendas-vendaTotalTitulo">Venda Total</th> -->
<!--                             </tr> -->
<!--                         </thead> -->

<!--                         <tbody> -->
<!--                             <tr class="gl-tabela-Padrao-dados" th:each="venda : ${vendasDoMesPorLojaPDV}"> -->

<!--                                 <td class="gl-tabela-vendas-lojaDados" th:text="${venda.loja}">1</td> -->
<!--                                 <td class="gl-tabela-vendas-vendaTotalDados" th:text="${'R$ ' + #numbers.formatDecimal(venda.valorTotal, 0, 'POINT', 2, 'COMMA')}">Visa</td> -->
<!--                             </tr> -->
<!--                             <tr th:if="${#lists.isEmpty(vendasDoMesPorLojaPDV)}"> -->
<!--                                 <td colspan="2" class="gl-nadaEncontrado">Nenhuma venda foi efetuada hoje</td> -->
<!--                             </tr> -->
<!--                         </tbody> -->
<!--                         <tfoot> -->
<!--                         <tr> -->
<!--                             <td class="gl-tabela-rodape-totalizador-Titulo">TOTAL DE VENDAS DO MÊS</td> -->
<!--                             <td class="gl-tabela-rodape-totalizador-Dados">R$ [[${{vendasDoMesAtualPDV}}]]</td> -->
<!--                             <td></td> -->
<!--                         </tr> -->
<!--                         </tfoot> -->
<!--                     </table> -->
<!--                      <hr /> -->
<!--                     <div class="gl-dates"> -->
<!--                        <label >EXPORTAR PARA:</label> -->
<!--                         <button id="btnExportExcelPDV" class="btn btn-sm btn-success clearfix"> -->
<!--                             <span class="fa fa-file-excel-o"></span>  EXPORT TO EXCEL -->
<!--                         </button> -->
<!--                     </div> -->
<!--                     <hr /> -->
<!--                 </div> -->
                
<!--                  <div class="table-responsive  bw-tabela-simples" > -->
<!--                       <div class="row"> -->
<!--                       <h4 class="col-sm-3  text-center">Vendas Danfe do Mês</h4> -->
<!--                       </div>  -->
<!--                     <table class="table  table-hover" th:object="${vendasDoMesPorLojaDanfe}" id="tableValorTotalDoMesPorLojaDanfe"> -->
<!--                         <thead> -->
<!--                             <tr class="gl-tabela-Padrao-Titulos"> -->
<!--                                 <th class="gl-tabela-vendas-lojaTitulo">Lojas</th> -->
<!--                                 <th class="gl-tabela-vendas-vendaTotalTitulo">Venda Total</th> -->
<!--                             </tr> -->
<!--                         </thead> -->

<!--                         <tbody> -->
<!--                             <tr class="gl-tabela-Padrao-dados" th:each="venda : ${vendasDoMesPorLojaDanfe}"> -->

<!--                                 <td class="gl-tabela-vendas-lojaDados" th:text="${venda.loja}">1</td> -->
<!--                                 <td class="gl-tabela-vendas-vendaTotalDados" th:text="${'R$ ' + #numbers.formatDecimal(venda.valorTotal, 0, 'POINT', 2, 'COMMA')}">Visa</td> -->
<!--                             </tr> -->
<!--                             <tr th:if="${#lists.isEmpty(vendasDoMesPorLojaDanfe)}"> -->
<!--                                 <td colspan="2" class="gl-nadaEncontrado">Nenhuma venda foi efetuada hoje</td> -->
<!--                             </tr> -->
<!--                         </tbody> -->
<!--                         <tfoot> -->
<!--                         <tr> -->
<!--                             <td class="gl-tabela-rodape-totalizador-Titulo">TOTAL DE VENDAS DO MÊS</td> -->
<!--                             <td class="gl-tabela-rodape-totalizador-Dados">R$ [[${{vendasDoMesAtualDanfe}}]]</td> -->
<!--                             <td></td> -->
<!--                         </tr> -->
<!--                         </tfoot> -->
<!--                     </table> -->
<!--                      <hr /> -->
<!--                     <div class="gl-dates"> -->
<!--                        <label >EXPORTAR PARA:</label> -->
<!--                         <button id="btnExportExcelDanfe" class="btn btn-sm btn-success clearfix"> -->
<!--                             <span class="fa fa-file-excel-o"></span>  EXPORT TO EXCEL -->
<!--                         </button> -->
<!--                     </div> -->
<!--                     <hr /> -->
<!--                 </div> -->
</div>
    
</section>
<th:block layout:fragment="javascript-extra">
        <script type="text/javascript">
            jQuery(window).load(function($){
                atualizaRelogio();
            });
        </script>
       <script>
        function atualizaRelogio(){ 
            var momentoAtual = new Date();
         
            var vmes = momentoAtual.getUTCMonth() + 1;
    
            dataFormat =vmes;
 
            document.getElementById("mes").innerHTML = dataFormat;
 
            setTimeout("atualizaRelogio()",1000);
        }
    </script>   
    <script th:src="@{/javascripts/exportacaoExcel/tabelaParaExcel.js}"></script>
    </th:block>
</body>
</html>